memoryRequests: '512Mi'
cpuRequests: '100m'
memoryLimits: '1024Mi'
cpuLimits: '2500m'
readinessPath: '/health'
readinessDelay: 30
readinessTimeout: 3
readinessPeriod: 15
livenessPath: '/health/liveness'
livenessDelay: 30
livenessTimeout: 3
livenessPeriod: 15
livenessFailureThreshold: 3

importer:
  cron:
    enabled: false
    schedule: '*/5 * * * *'
    concurrencyPolicy: Forbid
    image: hmcts/feature-toggle-importer
    command: echo FEATURE_TOGGLE_API_URL=${FEATURE_TOGGLE_API_URL}
    imagePullPolicy: Always
  oneoff:
    enabled: true
    image: hmcts/feature-toggle-importer
    command: echo FEATURE_TOGGLE_API_URL=${FEATURE_TOGGLE_API_URL}
    imagePullPolicy: Always

java:
  image: ${IMAGE_NAME}
  ingressHost: ${SERVICE_FQDN}
  releaseNameOverride: ${SERVICE_NAME}-ft-api
  applicationPort: 8580
  registerAdditionalDns:
    enabled: false
    primaryIngressHost: ${SERVICE_FQDN}
    prefix: www
  environment:
    FLYWAY_ENABLED: true
    FLYWAY_NOOP_STRATEGY: false
    FEATURES_DB_HOST: ${SERVICE_NAME}-ft-db
    FEATURES_DB_USER_NAME: features
    FEATURES_DB_PASSWORD: features
    LOGBACK_REQUIRE_THREAD: false
    LOGBACK_REQUIRE_ALERT_LEVEL: false
    LOGBACK_REQUIRE_ERROR_CODE: false
  keyVaults:
    "rpe-ft-api":
      resourceGroup: rpe-feature-toggle-api
      secrets:
        - admin-username-cmc
        - admin-password-cmc
        - editor-username-cmc
        - editor-password-cmc
        - admin-username-divorce
        - admin-password-divorce
        - editor-password-divorce
        - editor-username-divorce
        - admin-password-probate
        - admin-username-probate
        - editor-password-probate
        - editor-username-probate
        - admin-password-test
        - admin-username-test
        - editor-password-test
        - editor-username-test
postgresql:
  nameOverride: ft-db
  postgresqlDatabase: hmcts
  postgresqlUsername: hmcts
  postgresqlPassword: hmcts
  livenessProbe:
    initialDelaySeconds: 10
    periodSeconds: 10
  readinessProbe:
    initialDelaySeconds: 10
    periodSeconds: 10
  initdbScripts:
    init.sql: |-
      CREATE USER features WITH PASSWORD 'features';
      CREATE DATABASE features WITH OWNER = features ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
  persistence:
    enabled: false
tags:
  postgresql-pod: true
