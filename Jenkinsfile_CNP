#!groovy

import uk.gov.hmcts.contino.Environment
import uk.gov.hmcts.contino.Subscription


@Library("Infrastructure@feature/RPE-835-publish-microservice-chart-in-pipeline-2")
Environment environment = new Environment(env)
Subscription subscription = new Subscription(env)


String product = "rpe"
String component = "feature-toggle-api"

node {
  stage('Publish Helm chart') {
    checkout scm

    helmPublish(
      subscriptionName: subscription.nonProdName,
      environmentName: environment.nonProdName,
      product: product,
      component: component
    )
  }
}
